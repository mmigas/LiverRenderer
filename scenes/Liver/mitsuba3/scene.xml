<?xml version="1.0"?>
<scene version="3.6.0">
    <default name="integrator" value="volpath"/>
    <default name="spp" value="64"/>
    <default name="res_width" value="1280"/>
    <default name="res_height" value="720"/>
    <default name="max_depth" value="65"/>
    <integrator type="$integrator">
        <integer name="max_depth" value="$max_depth"/>
    </integrator>
    <sensor type="perspective">
        <float name="fov" value="45"/>
        <transform name="to_world">
            <lookat up="-0.317370, 0.895343, -0.312469"
                    target="6.826270, 5.011984, 5.896974"
                    origin="7.481132, 5.343665, 6.507640"/>
        </transform>
        <sampler type="ldsampler">
            <integer name="sample_count" value="$spp"/>
        </sampler>
        <film type="hdrfilm">
            <integer name="width" value="$res_width"/>
            <integer name="height" value="$res_height"/>
            <string name="file_format" value="openexr"/>
            <string name="pixel_format" value="rgb"/>
            <rfilter type="tent"/>
        </film>
    </sensor>
    <bsdf type="dielectric" id="ParenchymaBSDF">
        <float name="int_ior" value="1.5"/>
        <float name="ext_ior" value="1"/>
    </bsdf>
    <bsdf type="bumpmap" id="GlissonCapsuleBSDF">
            <float name="scale" value="0.005"/>
        <texture name="texture" type="bitmap">
            <string name="filename" value="tissue_n.png"/>
        </texture>
        <bsdf type="dielectric"/>
    </bsdf>
    <bsdf type="diffuse" id="FloorBSDF">
        <texture name="reflectance" type="checkerboard">
            <rgb name="color0" value="0.325, 0.31, 0.25"/>
            <rgb name="color1" value="0.725, 0.71, 0.68"/>
            <transform name="to_uv">
                <scale x="10.000000" y="10.000000"/>
            </transform>
        </texture>
    </bsdf>

    <medium id="glissonCapsuleMedium" type="glissonCapsule">
        <spectrum name="sigma_collagen1" value="360:0.2464"/>
        <spectrum name="sigma_collagen2" value="360:0.2464"/>
        <spectrum name="sigma_collagen3" value="360:0.2464"/>
        <spectrum name="sigma_collagen4" value="360:0.2464"/>
        <spectrum name="sigma_elastin1" value="360:0.2464"/>
        <spectrum name="sigma_elastin2" value="360:0.2464"/>
        <spectrum name="sigma_elastin3" value="360:0.2464"/>
        <spectrum name="sigma_elastin4" value="360:0.2464"/>
        <float name="scale" value="1"/>
    </medium>

    <medium id="parenchymaMedium" type="parenchyma">
        <spectrum name="sigma_blood" value="360:0.2464"/>
        <spectrum name="sigma_bile" value="360:0.0167"/>
        <spectrum name="sigma_hepatocity" value="360:269.2618"/>
        <spectrum name="sigma_lipid_water" value="360:0.0010"/>
        <float name="scale" value="1"/>
    </medium>


    <shape type="obj" id="liver1">
        <string name="filename" value="liver1.obj"/>
        <transform name="to_world">
            <scale value="1.0"/>
            <translate x="-5" y="5" z="-5"/>
        </transform>
        <ref id="GlissonCapsuleBSDF"/>
        <ref name="interior" id="glissonCapsuleMedium"/>
    </shape>

    <shape type="obj" id="liver2">
        <string name="filename" value="liver2.obj"/>
        <transform name="to_world">
            <scale value="1.0"/>
            <translate x="-5" y="5" z="-5"/>
        </transform>
        <ref id="ParenchymaBSDF"/>
        <ref name="interior" id="parenchymaMedium"/>
    </shape>
    <emitter type="envmap">
        <string name="filename" value="cavidade_latitude.exr"/>
        <float name="scale" value="2.5"/>
        <transform name="to_world">
            <translate x="-3" y="3" z="4"/>
            <scale value="1.0"/>
            <rotate x="0.57735" y="0.57735" z="0.57735" angle="180"/>
        </transform>
    </emitter>
</scene>
